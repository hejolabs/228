# 수학공부방 관리 시스템 - SPEC

> 대화를 통해 점진적으로 완성해 나가는 스펙 문서입니다.

---

## 1. 프로젝트 개요

수학공부방 원장님을 위한 학생/수업/출석/수업료 통합 관리 웹 애플리케이션.

- **사용자**: 공부방 원장 (단일 사용자)
- **규모**: 소규모 (학생 30명 이하)
- **핵심 목표**: 8회차 수업 사이클 관리 → 회차 완료 시 학부모 수업료 납부 안내 메시지 생성

---

## 2. 기술 스택

| 구분 | 기술 |
|------|------|
| 백엔드 | FastAPI |
| DB | SQLite |
| 프론트엔드 | Vite + React + TypeScript |
| UI 라이브러리 | shadcn/ui + Tailwind CSS |
| 프로젝트 구조 | 모노레포 (backend/ + frontend/) |

### 2.1 프로젝트 디렉토리 구조

```
228/
├── backend/              # FastAPI
│   ├── app/
│   │   ├── main.py
│   │   ├── models/
│   │   ├── routers/
│   │   └── database.py
│   ├── requirements.txt
│   └── pyproject.toml
├── frontend/             # React
│   ├── src/
│   ├── package.json
│   └── vite.config.ts
├── docs/
│   └── SPEC.md
└── README.md
```

---

## 3. 수업반 관리

### 3.1 수업반 정의

- 용어: **수업반**
- 기능: 등록 / 수정 / 삭제
- **무학년제** 운영 (초등/중등 구분 없이 편성 가능)
- 수업반의 기준점은 **시작 시간**
- 수업 시간: 초등 **90분** / 중·고등 **120분**
  - 같은 반에 초등과 중등이 혼재할 수 있음 (초등은 먼저 종료)

### 3.2 현재 수업반 구성

| 수업반 | 요일 | 시간 | 수업시간 | 비고 |
|--------|------|------|----------|------|
| 월수반A | 월, 수 | 14:30~16:00 | 90분 | 사실상 초등 전용 |
| 월수반B | 월, 수 | 16:30~18:30 | 120분 | 초등/중등 혼용 (초등은 90분, 18:00 종료) |
| 화목반A | 화, 목 | 14:30~16:00 | 90분 | 사실상 초등 전용 |
| 화목반B | 화, 목 | 16:30~18:30 | 120분 | 중등 |
| 화목반C | 화, 목 | 20:00~22:00 | 120분 | 중등 전용 |

### 3.3 수업반 데이터 모델 (초안)

- 수업반명
- 수업 요일 (복수 선택: 월~일)
- 시작 시간
- 기본 수업 시간 (분)
- 메모/비고

---

## 4. 학생 관리

### 4.1 학생 정보

| 항목 | 필수 | 비고 |
|------|------|------|
| 이름 | O | |
| 연락처 | O | 학생 본인 |
| 학교 | O | |
| 학년 | O | 초등/중1/중2/중3/고등 → 수업시간·수업료 결정 |
| 학부모 연락처 | O | 카카오톡 메시지 발송 대상 |
| 소속 수업반 | O | |
| 메모 | - | |

### 4.2 학년별 수업 기준

| 학년 구분 | 수업 시간 | 8회차 수업료 |
|-----------|-----------|-------------|
| 초등 | 90분 | 240,000원 |
| 중1 | 120분 | 320,000원 |
| 중2 | 120분 | 350,000원 |
| 중3 | 120분 | 350,000원 |
| 고등 | 120분 | 400,000원 |

---

## 5. 출석 관리 (8회차 사이클)

### 5.1 출석 상태

| 상태 | 회차 차감 | 설명 |
|------|-----------|------|
| 출석 | O (1회 차감) | 정상 출석 |
| 지각 | O (1회 차감) | 늦게 출석 |
| 조퇴 | O (1회 차감) | 일찍 퇴실 |
| 결석 | O (1회 차감) | 기본적으로 차감 |
| 결석 (미차감) | X | 학교행사(증빙), 병결(증빙) 시 미차감 |

### 5.2 미차감 사유

결석이지만 회차를 차감하지 않는 경우:
- **학교행사** (증빙 필요)
- **병결** (증빙 필요)
- **공부방 사정 휴강** (원장 사유)

### 5.3 8회차 사이클 핵심 로직

```
1. 학생이 수업반에 등록되면 → 새 사이클 시작 (1/8)
2. 매 수업일 출석 체크 → 회차 차감 (또는 미차감)
3. 8/8 회차 도달 → ⚠️ 원장님에게 알림
4. 원장님이 학부모 메시지 작성 (앱에서 문구 생성 지원)
5. 메시지를 복사 → 카카오톡으로 발송
6. 수업료 입금 확인 (통장 확인 후 앱에서 수동 체크)
7. 새로운 8회차 사이클 시작
```

---

## 6. 보충수업 관리

### 6.1 보충수업 개요

- 결석 시 회차는 **차감**하되, 별도로 **보충수업을 등록**하여 진행
- 보충수업은 회차 차감과 무관한 **별도 기록** (보충 완료해도 회차 복구 안 됨)
- 보충수업의 목적: 결석으로 놓친 학습 내용을 보충하기 위한 것

### 6.2 보충수업 형태 (다양한 케이스)

| 형태 | 설명 |
|------|------|
| 비정기 주말 수업 | 금/토/일에 별도 보충 수업 진행 |
| 축소 수업 | 초등 30분, 중등 60분 (정규 대비 적은 시간) |
| 추가 수업 | 정규 수업 뒤 15분씩 추가로 진행 |
| 다른 반 참여 | 다른 수업반 시간에 참여하여 보충 |

### 6.3 보충수업 등록 기능 (필요)

- 대상 학생
- 보충 일시
- 보충 시간 (분)
- 보충 사유 / 메모
- 완료 여부

---

## 7. 학습 관리

### 7.1 문제집 진도 관리

- 학생별 현재 풀고 있는 문제집
- 진도 기록 (페이지, 단원 등)

### 7.2 테스트/성적 관리

- 테스트 점수 기록
- 성적 추이 확인

### 7.3 원장님 메모

- 학생별 학습 관련 자유 메모

---

## 8. 수업료 관리

### 8.1 수업료 체계

- **8회차 단위** 결제 (월 단위가 아님)
- 학년별 정액 (4.2 참고)
- 학생마다 다를 수 있음 (개별 금액 설정 가능)

### 8.2 납부 확인 프로세스

```
1. 8회차 완료 → 앱에서 메시지 문구 생성
2. 원장님이 카카오톡으로 학부모에게 납부 안내
3. 학부모가 계좌이체
4. 원장님이 통장 확인 후 앱에서 납부 완료 체크
```

### 8.3 납부 기록

- 납부 일자
- 납부 금액
- 납부 방법 (계좌이체 / 현금 등)
- 납부 상태 (미납 / 납부완료)
- 해당 회차 사이클

---

## 9. 현금영수증 (TODO)

- 현금영수증 자동 발행 연동은 추후 검토
- **최소**: 현금영수증 발행 요청 기록 관리
  - 발행 요청 여부
  - 발행 번호 (휴대폰 번호 또는 사업자번호)
  - 발행 일자
  - 발행 금액
  - 처리 상태

---

## 10. 핵심 기능 요약 (우선순위)

| 순위 | 기능 | 설명 |
|------|------|------|
| ★★★ | 8회차 사이클 관리 | 학생별 회차 추적, 완료 알림, 메시지 생성 |
| ★★★ | 출석 관리 | 출석/결석/지각/조퇴 + 미차감 처리 |
| ★★★ | 수업반 관리 | 수업반 CRUD, 시간표 |
| ★★☆ | 학생 관리 | 학생 정보 CRUD |
| ★★☆ | 수업료 관리 | 납부 확인, 입금 체크 |
| ★★☆ | 보충수업 관리 | 보충수업 등록/관리 |
| ★☆☆ | 학습 관리 | 진도, 성적, 메모 |
| ★☆☆ | 현금영수증 | 기록 관리 (TODO) |

---

## 미확정 사항

> 대화를 통해 추가로 결정할 내용

- [ ] 학부모 메시지 템플릿 구체적 내용
- [ ] 대시보드에 표시할 핵심 정보
- [ ] 로그인/인증 방식 (단일 사용자이므로 간단한 비밀번호?)
- [ ] 데이터 백업 방식
- [ ] 학습 관리 상세 스펙
